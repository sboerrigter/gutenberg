"use strict";(self.webpackChunkgutenberg=self.webpackChunkgutenberg||[]).push([[276],{"./packages/compose/build-module/hooks/use-resize-observer/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return useResizeAware}});var _wordpress_element__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function useResolvedElement(subscriber,refOrElement){const callbackRefElement=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),lastReportRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),cleanupRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(),callSubscriber=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>{let element=null;callbackRefElement.current?element=callbackRefElement.current:refOrElement&&(element=refOrElement instanceof HTMLElement?refOrElement:refOrElement.current),lastReportRef.current&&lastReportRef.current.element===element&&lastReportRef.current.reporter===callSubscriber||(cleanupRef.current&&(cleanupRef.current(),cleanupRef.current=null),lastReportRef.current={reporter:callSubscriber,element:element},element&&(cleanupRef.current=subscriber(element)))}),[refOrElement,subscriber]);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{callSubscriber()}),[callSubscriber]),(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((element=>{callbackRefElement.current=element,callSubscriber()}),[callSubscriber])}const extractSize=(entry,boxProp,sizeType)=>entry[boxProp]?entry[boxProp][0]?entry[boxProp][0][sizeType]:entry[boxProp][sizeType]:"contentBoxSize"===boxProp?entry.contentRect["inlineSize"===sizeType?"width":"height"]:void 0;function useResizeAware(){const{ref:ref,width:width,height:height}=function useResizeObserver(){let opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const onResize=opts.onResize,onResizeRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(void 0);onResizeRef.current=onResize;const round=opts.round||Math.round,resizeObserverRef=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(),[size,setSize]=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useState)({width:void 0,height:void 0}),didUnmount=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>(didUnmount.current=!1,()=>{didUnmount.current=!0})),[]);const previous=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useRef)({width:void 0,height:void 0}),refCallback=useResolvedElement((0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useCallback)((element=>(resizeObserverRef.current&&resizeObserverRef.current.box===opts.box&&resizeObserverRef.current.round===round||(resizeObserverRef.current={box:opts.box,round:round,instance:new ResizeObserver((entries=>{const entry=entries[0];let boxProp="borderBoxSize";boxProp="border-box"===opts.box?"borderBoxSize":"device-pixel-content-box"===opts.box?"devicePixelContentBoxSize":"contentBoxSize";const reportedWidth=extractSize(entry,boxProp,"inlineSize"),reportedHeight=extractSize(entry,boxProp,"blockSize"),newWidth=reportedWidth?round(reportedWidth):void 0,newHeight=reportedHeight?round(reportedHeight):void 0;if(previous.current.width!==newWidth||previous.current.height!==newHeight){const newSize={width:newWidth,height:newHeight};previous.current.width=newWidth,previous.current.height=newHeight,onResizeRef.current?onResizeRef.current(newSize):didUnmount.current||setSize(newSize)}}))}),resizeObserverRef.current.instance.observe(element,{box:opts.box}),()=>{resizeObserverRef.current&&resizeObserverRef.current.instance.unobserve(element)})),[opts.box,round]),opts.ref);return(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({ref:refCallback,width:size.width,height:size.height})),[refCallback,size?size.width:null,size?size.height:null])}(),sizes=(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>({width:null!=width?width:null,height:null!=height?height:null})),[width,height]);return[(0,_wordpress_element__WEBPACK_IMPORTED_MODULE_0__.createElement)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",opacity:0,overflow:"hidden",zIndex:-1},"aria-hidden":"true",ref:ref}),sizes]}},"./packages/components/src/responsive-wrapper/stories/index.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},default:function(){return stories}});var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__("./node_modules/react/index.js"),use_resize_observer=__webpack_require__("./packages/compose/build-module/hooks/use-resize-observer/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function ResponsiveWrapper(_ref){let{naturalWidth:naturalWidth,naturalHeight:naturalHeight,children:children,isInline:isInline=!1}=_ref;const[containerResizeListener,{width:containerWidth}]=(0,use_resize_observer.Z)();if(1!==react.Children.count(children))return null;const imageStyle={paddingBottom:naturalWidth<(null!=containerWidth?containerWidth:0)?naturalHeight:naturalHeight/naturalWidth*100+"%"},TagName=isInline?"span":"div";return(0,jsx_runtime.jsxs)(TagName,{className:"components-responsive-wrapper",children:[containerResizeListener,(0,jsx_runtime.jsx)(TagName,{style:imageStyle}),(0,react.cloneElement)(children,{className:classnames_default()("components-responsive-wrapper__content",children.props.className)})]})}ResponsiveWrapper.displayName="ResponsiveWrapper";var responsive_wrapper=ResponsiveWrapper;try{ResponsiveWrapper.displayName="ResponsiveWrapper",ResponsiveWrapper.__docgenInfo={description:'A wrapper component that maintains its aspect ratio when resized.\n\n```jsx\nimport { ResponsiveWrapper } from \'@wordpress/components\';\n\nconst MyResponsiveWrapper = () => (\n\t<ResponsiveWrapper naturalWidth={ 2000 } naturalHeight={ 680 }>\n\t\t<img\n\t\t\tsrc="https://s.w.org/style/images/about/WordPress-logotype-standard.png"\n\t\t\talt="WordPress"\n\t\t/>\n\t</ResponsiveWrapper>\n);\n```',displayName:"ResponsiveWrapper",props:{naturalWidth:{defaultValue:null,description:"The intrinsic width of the element to wrap. Will be used to determine the aspect ratio.",name:"naturalWidth",required:!0,type:{name:"number"}},naturalHeight:{defaultValue:null,description:"The intrinsic height of the element to wrap. Will be used to determine the aspect ratio.",name:"naturalHeight",required:!0,type:{name:"number"}},children:{defaultValue:null,description:"The element to wrap.",name:"children",required:!0,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},isInline:{defaultValue:{value:"false"},description:"If true, the wrapper will be `span` instead of `div`.",name:"isInline",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/responsive-wrapper/index.tsx#ResponsiveWrapper"]={docgenInfo:ResponsiveWrapper.__docgenInfo,name:"ResponsiveWrapper",path:"packages/components/src/responsive-wrapper/index.tsx#ResponsiveWrapper"})}catch(__react_docgen_typescript_loader_error){}var stories={component:responsive_wrapper,title:"Components/ResponsiveWrapper",argTypes:{children:{control:{type:null}}},parameters:{sourceLink:"packages/components/src/responsive-wrapper",controls:{expanded:!0},docs:{source:{state:"open"}}}};const Template=args=>(0,jsx_runtime.jsx)(responsive_wrapper,{...args});Template.displayName="Template";const Default=Template.bind({});Default.args={naturalWidth:2e3,naturalHeight:680,children:(0,jsx_runtime.jsx)("img",{src:"https://s.w.org/style/images/about/WordPress-logotype-standard.png",alt:"WordPress"})};try{ComponentMeta.displayName="ComponentMeta",ComponentMeta.__docgenInfo={description:"For the common case where a component's stories are simple components that receives args as props:\n\n```tsx\nexport default { ... } as ComponentMeta<typeof Button>;\n```",displayName:"ComponentMeta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/components/src/responsive-wrapper/stories/index.tsx#ComponentMeta"]={docgenInfo:ComponentMeta.__docgenInfo,name:"ComponentMeta",path:"packages/components/src/responsive-wrapper/stories/index.tsx#ComponentMeta"})}catch(__react_docgen_typescript_loader_error){}}}]);